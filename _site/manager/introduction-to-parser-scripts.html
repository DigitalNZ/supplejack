<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Supplejack : Introduction to parser scripts</title>
        <meta name="description" content="Documentation for the Supplejack stack">

        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/supplejack/css/syntax.css">
        <link rel="stylesheet" href="/supplejack/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <h4><a class=brand href="/supplejack/">Supplejack</a>
    <small>Documentation for the Supplejack stack</small>
</h4>


                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <li><a href="/supplejack/">Home</a></li>
    
        
        

        
            
                <li class=nav-header>Getting started</li>
            
            <li data-order="2"><a href="/supplejack/start/install-setup.html">Install & Setup</a></li>
        
            
            <li data-order="1"><a href="/supplejack/start/dependancies.html">Dependancies</a></li>
        
            
            <li data-order="5"><a href="/supplejack/start/supplejack-worker.html">Supplejack Worker</a></li>
        
            
            <li data-order="4"><a href="/supplejack/start/supplejack-manager.html">Supplejack Manager</a></li>
        
            
            <li data-order="3"><a href="/supplejack/start/supplejack-api.html">Supplejack API</a></li>
        
    
        
        

        
            
                <li class=nav-header>Creating your API</li>
            
            <li data-order="1"><a href="/supplejack/api/api-admin.html">API Admin</a></li>
        
            
            <li data-order="2"><a href="/supplejack/api/schema-dsl-domain-specific-language.html">Schema DSL (Domain Specific Language)</a></li>
        
            
            <li data-order="1"><a href="/supplejack/api/creating-a-schema.html">Creating a Schema</a></li>
        
    
        
        

        
            
                <li class=nav-header>Using the manger</li>
            
            <li data-order="1"><a href="/supplejack/manager/introduction-to-parser-scripts.html">Introduction to parser scripts</a></li>
        
            
            <li data-order=""><a href="/supplejack/manager/parser-dsl-domain-specific-language.html">Parser DSL (Domain Specific Language)</a></li>
        
            
            <li data-order=""><a href="/supplejack/manager/validations.html">Validations</a></li>
        
            
            <li data-order=""><a href="/supplejack/manager/xml-namespaces.html">XML Namespaces</a></li>
        
            
            <li data-order=""><a href="/supplejack/manager/attribute-transformation-options.html">Attribute Transformation Options</a></li>
        
            
            <li data-order=""><a href="/supplejack/manager/enrichments.html">Enrichments</a></li>
        
            
            <li data-order=""><a href="/supplejack/manager/modifiers.html">Modifiers</a></li>
        
    
        
        

        
            
                <li class=nav-header>Developers</li>
            
            <li data-order="1"><a href="/supplejack/dev/licence.html">Licence</a></li>
        
            
            <li data-order="3"><a href="/supplejack/dev/changelog.html">Changelog</a></li>
        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h1>Introduction to parser scripts
        
    </h1>
</div>

<p>Parser scripts are instructions that describe how data from a particular source is to be harvested into Supplejack. </p>

<p>View the <a href="http://youtu.be/MLUURxcfcLc">introductory screencast</a> for a general overview of how parser scripts work inside Supplejack. </p>

<p>You can also view the introductory tutorials that will take you through a step by step process in creating your first parser scripts <a href="https://drive.google.com/file/d/0B63EYVIeMWSfdThwRXhxcllwTVE/edit?usp=sharing">Tutorial 1</a> <a href="https://drive.google.com/file/d/0B63EYVIeMWSfdERXYTJJYmR2cW8/edit?usp=sharing">Tutorial 2</a></p>

<h3 id="toc_0">What does a parser script look like?</h3>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">PublicAddressAndy</span> <span class="o">&lt;</span> <span class="no">HarvesterCore</span><span class="o">::</span><span class="no">Rss</span><span class="o">::</span><span class="no">Base</span>

  <span class="c1"># Specify the location of the data</span>

  <span class="n">base_url</span> <span class="s2">&quot;http://publicaddress.net/system/6.rss&quot;</span>

  <span class="c1"># Default mappings - the same attributes value for all records</span>

  <span class="n">attributes</span> <span class="ss">:content_partner</span><span class="p">,</span> <span class="ss">:display_content_partner</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s2">&quot;Public Address&quot;</span>
  <span class="n">attributes</span> <span class="ss">:category</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s2">&quot;Podcasts&quot;</span>
  <span class="n">attributes</span> <span class="ss">:primary_collection</span><span class="p">,</span> <span class="ss">:display_collection</span><span class="p">,</span> <span class="ss">:collection</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s2">&quot;Public Address Radio&quot;</span>
  <span class="n">attributes</span> <span class="ss">:usage</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s2">&quot;All rights reserved&quot;</span>

  <span class="c1"># Variable mappings - different attribute values for each record</span>

  <span class="n">attributes</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">xpath</span><span class="p">:</span> <span class="s2">&quot;/item/title&quot;</span>
  <span class="n">attributes</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">xpath</span><span class="p">:</span> <span class="s2">&quot;item/description&quot;</span>
  <span class="n">attributes</span> <span class="ss">:landing_url</span><span class="p">,</span> <span class="ss">xpath</span><span class="p">:</span> <span class="s2">&quot;item/link&quot;</span>
  <span class="n">attributes</span> <span class="ss">:display_date</span><span class="p">,</span> <span class="ss">xpath</span><span class="p">:</span> <span class="s2">&quot;item/pubDate&quot;</span>
  <span class="n">attributes</span> <span class="ss">:date</span><span class="p">,</span> <span class="ss">xpath</span><span class="p">:</span> <span class="s2">&quot;item/pubDate&quot;</span><span class="p">,</span> <span class="ss">date</span><span class="p">:</span> <span class="kp">true</span>
  <span class="n">attributes</span> <span class="ss">:category</span><span class="p">,</span> <span class="ss">xpath</span><span class="p">:</span> <span class="s2">&quot;item/pubDate&quot;</span>

  <span class="n">attributes</span> <span class="ss">:internal_identifier</span> <span class="k">do</span>
    <span class="n">get</span><span class="p">(</span><span class="ss">:landing_url</span><span class="p">)</span><span class="o">.</span><span class="n">downcase</span>
  <span class="k">end</span>


<span class="k">end</span>
</code></pre></div>
<p>The above example of a simple parser script starts by identifying the source of the data to ingest from (base_url). Each script then identifies the data fields (attributes) to copy data into. Field names are based on the specific schema that has been set up for your Supplejack instance. </p>

<p>Supplejack is supported by a <a href="/supplejack/manager/parser-dsl-domain-specific-language.html">Parser DSL</a> (Domain Specific Language) that has been designed specifically to support the capture and manipulation of data. The Parser DSL provides rich functions for getting, namespacing, validating, transforming, and enriching your source data. Supplejack allows you to use xpath expressions and regex to get the data, as well as providing the option for ruby code if you need to do some heavy lifting.</p>

<p>The tutorials above are a great place to start in understanding how to build your first parser script, with the Parser DSL, and example scripts being the place to look for advanced support.</p>


                    </div>
                
            </div>

            <div class=row-fluid>
                <div id=footer class=span12>
                    Documentation for <a href="https://github.com/DigitalNZ/supplejack_api">Supplejack</a>

                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
    </body>
</html>
