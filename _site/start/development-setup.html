<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <link rel="apple-touch-icon" sizes="144x144" href="/supplejack/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/supplejack/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/supplejack/favicon-16x16.png">
        <link rel="manifest" href="/supplejack/manifest.json">
        <link rel="mask-icon" href="/supplejack/safari-pinned-tab.svg" color="#118a0f">
        <meta name="theme-color" content="#118a0f">

        <title>Supplejack : Development Setup</title>
        <meta name="description" content="Documentation">

        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/supplejack/css/syntax.css">
        <link rel="stylesheet" href="/supplejack/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <a href="/supplejack/">
                      <img src="/supplejack/images/supplejack_logo.png" alt='Supplejack' />
                    </a>
                    <small>Documentation (Version 0.1)</small>
                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <li><a href="/supplejack/">Home</a></li>
    <li><a href="/supplejack/about.html">About</a></li>
    <li><a href="/supplejack/screenshots.html">Screenshots</a></li>
    <li><a href="/supplejack/architecture.html">Architecture</a></li>
    <li><a href="/supplejack/licence.html">Licence</a></li>
    
        
        

        
            
                <li class=nav-header>Installation</li>
            
            <li data-order="11"><a href="/supplejack/start/installation-walk-through-by-example.html">Installation Walk-through by Example</a></li>
        
            
            <li data-order="3"><a href="/supplejack/start/production-install.html">Production Install</a></li>
        
            
            <li data-order="7"><a href="/supplejack/start/supplejack-website.html">Supplejack Website</a></li>
        
            
            <li data-order="6"><a href="/supplejack/start/supplejack-client.html">Supplejack Client</a></li>
        
            
            <li data-order="9"><a href="/supplejack/start/troubleshooting.html">Troubleshooting</a></li>
        
            
            <li data-order="8"><a href="/supplejack/start/supplejack-common.html">Supplejack Common</a></li>
        
            
            <li data-order="2"><a href="/supplejack/start/development-setup.html">Development Setup</a></li>
        
            
            <li data-order="1"><a href="/supplejack/start/dependencies.html">Dependencies</a></li>
        
            
            <li data-order="5"><a href="/supplejack/start/supplejack-worker.html">Supplejack Worker</a></li>
        
            
            <li data-order="4"><a href="/supplejack/start/supplejack-manager.html">Supplejack Manager</a></li>
        
            
            <li data-order="3"><a href="/supplejack/start/supplejack-api.html">Supplejack API</a></li>
        
    
        
        

        
            
                <li class=nav-header>Creating your API</li>
            
            <li data-order="3"><a href="/supplejack/api/api-admin.html">API Admin</a></li>
        
            
            <li data-order="2"><a href="/supplejack/api/schema-dsl-domain-specific-language.html">Schema DSL (Domain Specific Language)</a></li>
        
            
            <li data-order="1"><a href="/supplejack/api/creating-schemas.html">Creating Schemas</a></li>
        
    
        
        

        
            
                <li class=nav-header>Using the API</li>
            
            <li data-order=""><a href="/supplejack/api_usage/metrics-api.html">Metrics API</a></li>
        
            
            <li data-order="2"><a href="/supplejack/api_usage/user-sets.html">Sets API</a></li>
        
            
            <li data-order="1"><a href="/supplejack/api_usage/records-api.html">Records API</a></li>
        
            
            <li data-order="3"><a href="/supplejack/api_usage/concepts-api.html">Concepts API</a></li>
        
    
        
        

        
            
                <li class=nav-header>Using the manager</li>
            
            <li data-order="11"><a href="/supplejack/manager/job-status.html">Job Status</a></li>
        
            
            <li data-order="10"><a href="/supplejack/manager/concept-configuration.html">Concepts Configuration</a></li>
        
            
            <li data-order="9"><a href="/supplejack/manager/linkchecker.html">Link Checker</a></li>
        
            
            <li data-order="8"><a href="/supplejack/manager/code-snippets.html">Code Snippets</a></li>
        
            
            <li data-order="1"><a href="/supplejack/manager/introduction-to-parser-scripts.html">Introduction to parser scripts</a></li>
        
            
            <li data-order="2"><a href="/supplejack/manager/parser-dsl-domain-specific-language.html">Parser DSL (Domain Specific Language)</a></li>
        
            
            <li data-order="3"><a href="/supplejack/manager/validations.html">Validations</a></li>
        
            
            <li data-order="4"><a href="/supplejack/manager/xml-namespaces.html">XML Namespaces</a></li>
        
            
            <li data-order="5"><a href="/supplejack/manager/attribute-transformation-options.html">Attribute Transformation Options</a></li>
        
            
            <li data-order="6"><a href="/supplejack/manager/enrichments.html">Enrichments</a></li>
        
            
            <li data-order="7"><a href="/supplejack/manager/modifiers.html">Modifiers</a></li>
        
    
        
        

        
            
                <li class=nav-header>Activity Metrics</li>
            
            <li data-order=""><a href="/supplejack/metrics/item-metrics.html">Item Metrics</a></li>
        
            
            <li data-order=""><a href="/supplejack/metrics/usage-metrics.html">Usage Metrics</a></li>
        
    
        
        

        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h1>Development Setup
        
    </h1>
</div>

<p>Once you have installed all the <a href="/supplejack/start/dependencies.html">dependencies</a> you are now ready to install the rest of the stack. As all the components require configuration to interact we strongly recommend that you use the <a href="https://github.com/DigitalNZ/supplejack_installation">installation template</a> which is a <a href="http://guides.rubyonrails.org/rails_application_templates.html">Rails Application Template</a> which is provided for Supplejack.</p>

<p>If you are a Mac user using <a href="http://brew.sh/">Homebrew</a> we strongly recommend you cleanly run brew doctor before installing. </p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">$ brew update
$ brew doctor
</code></pre></figure>
<p>Resolving issues that <code>brew doctor</code> picks up will alleviate many problems you might encounter installing Supplejack.</p>

<p>Please also note there is a known installation issue involving the <em>libv8</em> gem, which can affect Yosemite users. We are working to resolve this.</p>

<h2 id="start-mongodb">Start MongoDB</h2>

<p><code>mongod</code> is the primary daemon process for the MongoDB system. It handles data requests, manages data access, and performs background management operations. You need to run mongod in order to install Supplejack and whenever Supplejack is in use.</p>

<p>Assuming your installation went smoothly and your paths are set up correctly you should be able to run mongod from the command line.</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">$ mongod
</code></pre></figure>
<p>If mongod doesn&#39;t start, review the <a href="http://docs.mongodb.org/manual/tutorial/">MongoDB installation documention</a> for your system.</p>

<h2 id="install-the-supplejack-stack">Install the Supplejack Stack</h2>

<p>The Supplejack Stack refers to the Supplejack API, Supplejack Manager and the Supplejack Worker applications. </p>

<p>The  <a href="https://github.com/DigitalNZ/supplejack_installation">installation template</a> creates a new Rails application using the Supplejack API and then installs and configures the Supplejack Manager and Supplejack Worker applications.</p>

<p>To install the full stack run the following command:</p>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash"># You should replace &#39;mysupplejack_api_name&#39; with the name of your app.

$ rails _5.1.4_ new mysupplejack_api_name --skip-bundle -m https://raw.github.com/digitalnz/supplejack_installation/master/supplejack_api_template.rb
</code></pre></figure>
<p><strong>Note:</strong> Be sure to record the user API key that is printed to the terminal during the install process.</p>

<p>This operation will create three directories and many files:
<code>
/mysupplejack_api_name
/supplejack_manager
/supplejack_worker
</code></p>

<p>If you ever want to remove this supplejack project, simply delete these three directories.</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cd mysupplejack_api_name
$ bundle install
</code></pre></figure>
<h2 id="configure-sidekiq">Configure Sidekiq</h2>

<p>Supplejack uses Sidekiq to manage indexing jobs. Make sure you have installed Redis as Sidekiq depends on it.</p>

<p>To start Sidekiq, run the following command</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cd mysupplejack_api_name
$ bundle exec sidekiq
</code></pre></figure>
<p>These commands will start Sidekiq and have it start listening for jobs to process from Redis</p>

<h2 id="configure-solr">Configure Solr</h2>

<p>Supplejack uses the <a href="https://github.com/sunspot/sunspot">sunspot</a> gem to interact with Solr. There is currently an issue with Sunspot and Solr 4. For development instances, <a href="https://github.com/sunspot/sunspot/wiki/Upgrading-sunspot_solr-Solr-Instance">please follow these configuration instructions</a>. When asked which version of Solr to download, select <a href="http://archive.apache.org/dist/lucene/solr/4.1.0/">solr-4.1.0.tgz or solr-4.1.0.zip </a>.</p>

<p>Confirm that you have configured Solr by starting an instance and visiting the admin dashboard at either: <a href="http://localhost:8982/solr">http://localhost:8982/solr</a> or <a href="http://localhost:8983/solr">http://localhost:8983/solr</a>.</p>

<p>Whenever you want to start Solr execute the following command from <code>/mysupplejack_api_name</code>.</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">$ bundle exec rake sunspot:solr:start
</code></pre></figure>
<h2 id="start-supplejack">Start Supplejack</h2>

<p>Finally start a rails server from within <code>/mysupplejack_api_name</code>.</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">$ rails server
</code></pre></figure>
<p>Once complete you will be able to access your API (at <a href="http://localhost:3000/records.json?api_key=USER_API_KEY">http://localhost:3000/records.json?api_key=USER_API_KEY</a>) and harvest new data from external sources.</p>


                    </div>
                
            </div>

        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
    </body>
</html>
